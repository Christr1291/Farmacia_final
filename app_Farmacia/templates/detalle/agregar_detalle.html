{% extends 'base.html' %}
{% block content %}
<h3>Agregar Detalle de Venta</h3>
<form method="POST">
  {% csrf_token %}
  <div class="row">
    <div class="col-md-6 mb-3">
      <label>Venta</label>
      <select class="form-control" name="venta" required>
        <option value="">-- Seleccionar Venta --</option>
        {% for v in ventas %}
          <option value="{{ v.id }}">Factura: {{ v.numero_factura }} - {{ v.cliente.nombre }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-6 mb-3">
      <label>Medicamento</label>
      <select class="form-control" name="medicamento" required>
        <option value="">-- Seleccionar Medicamento --</option>
        {% for m in medicamentos %}
          <option value="{{ m.id }}">{{ m.nombre_medicamento }} (Stock: {{ m.stock }})</option>
        {% endfor %}
      </select>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3 mb-3">
      <label>Cantidad</label>
      <input class="form-control" name="cantidad" type="number" value="1" required>
    </div>
    <div class="col-md-3 mb-3">
      <label>Precio Unitario</label>
      <input class="form-control" name="precio_unitario_venta" type="number" step="0.01" required>
    </div>
    <div class="col-md-3 mb-3">
      <label>IVA Aplicado</label>
      <input class="form-control" name="iva_aplicado" type="number" step="0.01" value="0.00" required>
    </div>
    <div class="col-md-3 mb-3">
      <label>Subtotal</label>
      <input class="form-control" name="subtotal" type="number" step="0.01" required>
    </div>
  </div>

  <button class="btn btn-primary" type="submit">Agregar Detalle</button>
</form>
{% endblock %}