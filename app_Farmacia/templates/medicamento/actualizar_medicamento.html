{% extends 'base.html' %}
{% block content %}
<h3>Actualizar Medicamento #{{ medicamento.id }}</h3>
<form method="POST" action="{% url 'realizar_actualizacion_medicamento' medicamento.id %}">
  {% csrf_token %}
  <div class="row">
    <div class="col-md-6 mb-3">
      <label>Nombre Medicamento</label>
      <input class="form-control" name="nombre_medicamento" value="{{ medicamento.nombre_medicamento }}" required>
    </div>
    <div class="col-md-6 mb-3">
      <label>Código de Barra</label>
      <input class="form-control" name="codigo_barra" value="{{ medicamento.codigo_barra }}" required>
    </div>
  </div>

  <div class="mb-3">
    <label>Descripción</label>
    <textarea class="form-control" name="descripcion" rows="2">{{ medicamento.descripcion }}</textarea>
  </div>

  <div class="row">
    <div class="col-md-4 mb-3">
      <label>Precio Venta</label>
      <input class="form-control" name="precio_venta" type="number" step="0.01" value="{{ medicamento.precio_venta|stringformat:'f' }}" required>
    </div>
    <div class="col-md-4 mb-3">
      <label>Stock</label>
      <input class="form-control" name="stock" type="number" value="{{ medicamento.stock }}" required>
    </div>
    <div class="col-md-4 mb-3">
      <label>Fecha Vencimiento</label>
      <input class="form-control" name="fecha_vencimiento" type="date" value="{{ medicamento.fecha_vencimiento|date:'Y-m-d' }}" required>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6 mb-3">
      <label>Principio Activo</label>
      <input class="form-control" name="principio_activo" value="{{ medicamento.principio_activo }}" required>
    </div>
    <div class="col-md-6 mb-3">
      <label>Forma Farmacéutica</label>
      <input class="form-control" name="forma_farmaceutica" value="{{ medicamento.forma_farmaceutica }}" required>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6 mb-3">
      <label>Proveedor</label>
      <select class="form-control" name="proveedor" required>
        {% for p in proveedores %}
          <option value="{{ p.id }}" {% if p.id == medicamento.proveedor.id %}selected{% endif %}>
            {{ p.nombre_proveedor }}
          </option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-6 mb-3 d-flex align-items-center">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" name="requiere_receta" id="checkReceta" {% if medicamento.requiere_receta %}checked{% endif %}>
        <label class="form-check-label" for="checkReceta">Requiere Receta</label>
      </div>
    </div>
  </div>

  <button class="btn btn-success" type="submit">Guardar Cambios</button>
  <a class="btn btn-secondary" href="{% url 'ver_medicamentos' %}">Cancelar</a>
</form>
{% endblock %}